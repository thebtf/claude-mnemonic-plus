<?xml version="1.0"?>
<Container version="2">
  <Name>engram</Name>
  <Repository>ghcr.io/thebtf/engram:latest</Repository>
  <Registry>https://github.com/thebtf/engram/pkgs/container/engram</Registry>
  <Network>bridge</Network>
  <MyIP/>
  <Shell>sh</Shell>
  <Privileged>false</Privileged>
  <Support>https://github.com/thebtf/engram/issues</Support>
  <Project>https://github.com/thebtf/engram</Project>
  <Overview>
    Engram - persistent memory system for Claude Code.
    Captures observations, decisions, and patterns from AI coding sessions.
    Stores in PostgreSQL+pgvector, provides MCP tools via SSE and HTTP API.
    Requires a PostgreSQL 17+ instance with pgvector extension.
  </Overview>
  <Category>Tools: Productivity:</Category>
  <WebUI>http://[IP]:[PORT:37777]/</WebUI>
  <TemplateURL>https://raw.githubusercontent.com/thebtf/engram/main/deploy/unraid/unleashed-CMPlus.xml</TemplateURL>
  <Icon>https://raw.githubusercontent.com/thebtf/engram/main/deploy/icon.svg</Icon>
  <ExtraParams/>
  <PostArgs/>
  <CPUset/>
  <DateInstalled/>
  <DonateText/>
  <DonateLink/>
  <Requires>PostgreSQL 17+ with pgvector extension (use pgvector/pgvector:pg17 image)</Requires>
  <Config Name="Worker Port" Target="37777" Default="37777" Mode="tcp" Description="Worker HTTP API + MCP SSE port (hooks, dashboard, nia tools)" Type="Port" Display="always" Required="true" Mask="false">37777</Config>
  <Config Name="DATABASE_DSN" Target="DATABASE_DSN" Default="postgres://engram:engram@unleashed.lan:5432/engram?sslmode=disable" Mode="" Description="PostgreSQL connection string (must have pgvector extension)" Type="Variable" Display="always" Required="true" Mask="false">postgres://engram:engram@unleashed.lan:5432/engram?sslmode=disable</Config>
  <Config Name="ENGRAM_API_TOKEN" Target="ENGRAM_API_TOKEN" Default="" Mode="" Description="API token for authentication (leave empty to disable)" Type="Variable" Display="always" Required="false" Mask="true"/>
  <Config Name="ENGRAM_WORKER_HOST" Target="ENGRAM_WORKER_HOST" Default="0.0.0.0" Mode="" Description="Worker bind address" Type="Variable" Display="advanced" Required="false" Mask="false">0.0.0.0</Config>
  <Config Name="ENGRAM_WORKER_PORT" Target="ENGRAM_WORKER_PORT" Default="37777" Mode="" Description="Worker internal port" Type="Variable" Display="advanced" Required="false" Mask="false">37777</Config>
  <Config Name="ENGRAM_EMBEDDING_PROVIDER" Target="ENGRAM_EMBEDDING_PROVIDER" Default="openai" Mode="" Description="Embedding provider: openai (recommended for LiteLLM) or builtin (ONNX BGE)" Type="Variable" Display="always" Required="false" Mask="false">openai</Config>
  <Config Name="ENGRAM_EMBEDDING_BASE_URL" Target="ENGRAM_EMBEDDING_BASE_URL" Default="http://unleashed.lan:4000/v1" Mode="" Description="Embedding API base URL (e.g. LiteLLM proxy)" Type="Variable" Display="always" Required="false" Mask="false">http://unleashed.lan:4000/v1</Config>
  <Config Name="ENGRAM_EMBEDDING_API_KEY" Target="ENGRAM_EMBEDDING_API_KEY" Default="" Mode="" Description="Embedding API key (for LiteLLM or OpenAI)" Type="Variable" Display="always" Required="false" Mask="true"/>
  <Config Name="ENGRAM_EMBEDDING_MODEL_NAME" Target="ENGRAM_EMBEDDING_MODEL_NAME" Default="openai/Qwen/Qwen3-Embedding-8B" Mode="" Description="Embedding model name" Type="Variable" Display="always" Required="false" Mask="false">openai/Qwen/Qwen3-Embedding-8B</Config>
  <Config Name="ENGRAM_EMBEDDING_DIMENSIONS" Target="ENGRAM_EMBEDDING_DIMENSIONS" Default="4096" Mode="" Description="Embedding vector dimensions" Type="Variable" Display="always" Required="false" Mask="false">4096</Config>
  <Config Name="Data Directory" Target="/data" Default="/mnt/user/appdata/engram" Mode="rw" Description="Persistent data directory" Type="Path" Display="always" Required="false" Mask="false">/mnt/user/appdata/engram</Config>
</Container>
